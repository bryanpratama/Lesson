<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Konversi Angka ke Terbilang</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f5f5f5;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
    }

    h1 {
      color: #333;
      margin-bottom: 20px;
    }

    input {
      padding: 10px;
      font-size: 18px;
      width: 300px;
      border-radius: 5px;
      border: 1px solid #ccc;
      text-align: right;
    }

    button {
      margin-top: 10px;
      padding: 10px 20px;
      font-size: 16px;
      background-color: #007BFF;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    button:hover {
      background-color: #0056b3;
    }

    #hasil {
      margin-top: 20px;
      font-size: 18px;
      color: #444;
      width: 80%;
      max-width: 600px;
      text-align: center;
      word-wrap: break-word;
    }
  </style>
</head>
<body>
  <h1>Konversi Angka ke Terbilang</h1>
  <input type="text" id="inputAngka" placeholder="Masukkan angka besar..." oninput="formatAngka(this)">
  <button onclick="konversi()">Konversi</button>
  <div id="hasil"></div>

  <script>
    const satuan = ["", "satu", "dua", "tiga", "empat", "lima", "enam", "tujuh", "delapan", "sembilan"];
    const belasan = ["sepuluh", "sebelas", "dua belas", "tiga belas", "empat belas", "lima belas", "enam belas", "tujuh belas", "delapan belas", "sembilan belas"];
    const puluhan = ["", "", "dua puluh", "tiga puluh", "empat puluh", "lima puluh", "enam puluh", "tujuh puluh", "delapan puluh", "sembilan puluh"];
    const skala = ["", "ribu", "juta", "miliar", "triliun", "kuadriliun", "kuintiliun", "sekstiliun", "septiliun", "oktiliun", "noniliun", "desiliun", "undesiliun", "duodesiliun", "tresdesiliun", "kuattuordesiliun", "kuinquadesiliun", "seksdesiliun", "septendesiliun", "oktodesiliun", "novemdesiliun", "vigisiliun", "unvigintiliun", "duovigintiliun"];

    function angkaKeKata(num) {
      if (num === 0n) return "nol";
      let hasil = "";
      let grup = 0;

      while (num > 0n) {
        let tigaDigit = num % 1000n;
        if (tigaDigit > 0n) {
          let bagian = konversiTigaDigit(Number(tigaDigit)) + (skala[grup] ? " " + skala[grup] : "");
          hasil = bagian + (hasil ? " " + hasil : "");
        }
        num = num / 1000n;
        grup++;
      }

      return hasil.trim();
    }

    function konversiTigaDigit(num) {
      if (num === 0) return "";
      if (num < 10) return satuan[num];
      if (num < 20) return belasan[num - 10];
      if (num < 100) return puluhan[Math.floor(num / 10)] + (num % 10 !== 0 ? " " + satuan[num % 10] : "");
      
      let ratusan = Math.floor(num / 100);
      let sisa = num % 100;
      let ratusanKata = ratusan === 1 ? "seratus" : satuan[ratusan] + " ratus";
      return ratusanKata + (sisa !== 0 ? " " + konversiTigaDigit(sisa) : "");
    }

    function formatAngka(el) {
      let angka = el.value.replace(/\D/g, ""); // hilangkan semua non-digit
      let formatted = angka.replace(/\B(?=(\d{3})+(?!\d))/g, "."); // kasih titik per 3 digit

      // Simpan posisi kursor
      let cursorPos = el.selectionStart;
      let prevLength = el.value.length;

      el.value = formatted;

      let diff = formatted.length - prevLength;
      el.setSelectionRange(cursorPos + diff, cursorPos + diff);
    }

    function konversi() {
      const input = document.getElementById("inputAngka").value.trim().replace(/\./g, "");
      const hasilEl = document.getElementById("hasil");

      try {
        let num = BigInt(input);
        let max = BigInt("9".repeat(75));

        if (num > max) {
          hasilEl.innerText = "Maaf, angka terlalu besar! Maksimum adalah 999 duovigintiliun.";
        } else {
          hasilEl.innerText = angkaKeKata(num);
        }
      } catch (e) {
        hasilEl.innerText = "Masukkan angka yang valid!";
      }
    }
  </script>
</body>
</html>
